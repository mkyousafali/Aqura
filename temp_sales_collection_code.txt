=== ADD TO STATE VARIABLES (around line 34) ===

Replace this:
	let yesterdayBranchSalesData: BranchSales[] = [];
	let currentMonthAvg: MonthlyAverage | null = null;
	let previousMonthAvg: MonthlyAverage | null = null;
	let loading = true;
	let loadingBranch = true;
	let loadingYesterdayBranch = true;
	let maxAmount = 0;
	let minAmount = 0;
	let maxBranchAmount = 0;
	let maxYesterdayBranchAmount = 0;

With this:
	let yesterdayBranchSalesData: BranchSales[] = [];
	let todayCollectionData: BranchSales[] = [];
	let yesterdayCollectionData: BranchSales[] = [];
	let currentMonthAvg: MonthlyAverage | null = null;
	let previousMonthAvg: MonthlyAverage | null = null;
	let loading = true;
	let loadingBranch = true;
	let loadingYesterdayBranch = true;
	let loadingTodayCollection = true;
	let loadingYesterdayCollection = true;
	let maxAmount = 0;
	let minAmount = 0;
	let maxBranchAmount = 0;
	let maxYesterdayBranchAmount = 0;
	let maxTodayCollectionAmount = 0;
	let maxYesterdayCollectionAmount = 0;

=== ADD TO onMount (around line 57) ===

Replace this:
		await loadSalesData();
		await loadBranchSalesData();
		await loadYesterdayBranchSalesData();
		
		// Subscribe to real-time changes in erp_daily_sales table
		subscribeToSalesUpdates();

With this:
		await loadSalesData();
		await loadBranchSalesData();
		await loadYesterdayBranchSalesData();
		await loadTodayCollectionData();
		await loadYesterdayCollectionData();
		
		// Subscribe to real-time changes in erp_daily_sales table
		subscribeToSalesUpdates();

=== ADD NEW FUNCTIONS (after loadYesterdayBranchSalesData function, around line 584) ===

	async function loadTodayCollectionData() {
		loadingTodayCollection = true;
		const startTime = performance.now();
		console.log('ðŸ“Š Loading today collection data...');
		
		try {
			// Get today's date in YYYY-MM-DD format
			const today = new Date().toISOString().split('T')[0];
			
			// Fetch today's completed denomination records
			const { data: records, error } = await supabase
				.from('denomination_records')
				.select(`
					*,
					branches!inner(id, location_en, location_ar)
				`)
				.eq('status', 'completed')
				.gte('start_time', `${today}T00:00:00`)
				.lte('start_time', `${today}T23:59:59`);
			
			if (error) throw error;
			
			console.log('ðŸ“Š Today collection records:', records);
			
			// Get branch names map
			const locale = get(currentLocale);
			
			// Group by branch
			const branchIds = [...new Set(records?.map(r => r.branch_id) || [])];
			const groupedByBranch = branchIds.map(branchId => {
				const branchRecords = records?.filter(r => r.branch_id === branchId) || [];
				const branchInfo = branchRecords[0]?.branches;
				const branchName = branchInfo ? (locale === 'ar' ? (branchInfo.location_ar || branchInfo.location_en) : (branchInfo.location_en || branchInfo.location_ar)) : `Branch ${branchId}`;
				
				// Sum total_sales from closing_details JSON
				let total_amount = 0;
				let total_bills = 0;
				
				branchRecords.forEach(record => {
					try {
						const closingDetails = typeof record.closing_details === 'string' 
							? JSON.parse(record.closing_details) 
							: record.closing_details;
						
						if (closingDetails?.total_sales) {
							total_amount += parseFloat(closingDetails.total_sales) || 0;
						}
					} catch (e) {
						console.error('Error parsing closing_details:', e);
					}
				});
				
				return {
					branch_id: branchId,
					branch_name: branchName,
					total_amount,
					total_bills,
					total_return: 0
				};
			});
			
			todayCollectionData = groupedByBranch;
			maxTodayCollectionAmount = Math.max(...groupedByBranch.map(d => d.total_amount), 1);
		} catch (err) {
			console.error('âŒ Error loading today collection data:', err);
		} finally {
			const endTime = performance.now();
			const duration = (endTime - startTime).toFixed(2);
			console.log(`âœ… Today collection data loaded in ${duration}ms`);
			loadingTodayCollection = false;
		}
	}

	async function loadYesterdayCollectionData() {
		loadingYesterdayCollection = true;
		const startTime = performance.now();
		console.log('ðŸ“Š Loading yesterday collection data...');
		
		try {
			// Get yesterday's date in YYYY-MM-DD format
			const yesterday = new Date();
			yesterday.setDate(yesterday.getDate() - 1);
			const yesterdayStr = yesterday.toISOString().split('T')[0];
			
			// Fetch yesterday's completed denomination records
			const { data: records, error } = await supabase
				.from('denomination_records')
				.select(`
					*,
					branches!inner(id, location_en, location_ar)
				`)
				.eq('status', 'completed')
				.gte('start_time', `${yesterdayStr}T00:00:00`)
				.lte('start_time', `${yesterdayStr}T23:59:59`);
			
			if (error) throw error;
			
			console.log('ðŸ“Š Yesterday collection records:', records);
			
			// Get branch names map
			const locale = get(currentLocale);
			
			// Group by branch
			const branchIds = [...new Set(records?.map(r => r.branch_id) || [])];
			const groupedByBranch = branchIds.map(branchId => {
				const branchRecords = records?.filter(r => r.branch_id === branchId) || [];
				const branchInfo = branchRecords[0]?.branches;
				const branchName = branchInfo ? (locale === 'ar' ? (branchInfo.location_ar || branchInfo.location_en) : (branchInfo.location_en || branchInfo.location_ar)) : `Branch ${branchId}`;
				
				// Sum total_sales from closing_details JSON
				let total_amount = 0;
				let total_bills = 0;
				
				branchRecords.forEach(record => {
					try {
						const closingDetails = typeof record.closing_details === 'string' 
							? JSON.parse(record.closing_details) 
							: record.closing_details;
						
						if (closingDetails?.total_sales) {
							total_amount += parseFloat(closingDetails.total_sales) || 0;
						}
					} catch (e) {
						console.error('Error parsing closing_details:', e);
					}
				});
				
				return {
					branch_id: branchId,
					branch_name: branchName,
					total_amount,
					total_bills,
					total_return: 0
				};
			});
			
			yesterdayCollectionData = groupedByBranch;
			maxYesterdayCollectionAmount = Math.max(...groupedByBranch.map(d => d.total_amount), 1);
		} catch (err) {
			console.error('âŒ Error loading yesterday collection data:', err);
		} finally {
			const endTime = performance.now();
			const duration = (endTime - startTime).toFixed(2);
			console.log(`âœ… Yesterday collection data loaded in ${duration}ms`);
			loadingYesterdayCollection = false;
		}
	}

	function getCollectionBarColor(amount: number, dataArray: BranchSales[]): string {
		const amounts = dataArray.map(d => d.total_amount).sort((a, b) => b - a);
		const highest = amounts[0];
		const lowest = amounts[amounts.length - 1];
		
		if (amount === highest) return '#10b981'; // Green for top
		if (amount === lowest) return '#ef4444'; // Red for lowest
		return '#f97316'; // Orange for middle
	}

	function getCollectionBarHeight(amount: number, maxAmount: number): number {
		if (!maxAmount || maxAmount === 0) return 20;
		const percent = (amount / maxAmount) * 100;
		return Math.max(Math.round(percent), 20); // Minimum 20px height
	}

=== ADD UI CARDS (after Yesterday's Branch Sales Card, around line 825) ===

	<!-- Today's Sales Collection Card -->
	<div class="sales-card">
		<div class="header">
			<h3>{$t('reports.todayCollectionSales') || 'Today Sales (Collection)'}</h3>
			<button class="refresh-btn" on:click={loadTodayCollectionData} title="Refresh">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
				</svg>
			</button>
		</div>
		{#if loadingTodayCollection}
			<div class="loading">{$t('common.loading')}</div>
		{:else}
			<div class="chart-container">
				{#each todayCollectionData as branch}
					<div class="sale-item">
						<div class="bar-container">
							<div class="bar" style="height: {getCollectionBarHeight(branch.total_amount, maxTodayCollectionAmount)}px; background-color: {getCollectionBarColor(branch.total_amount, todayCollectionData)};"></div>
						</div>
						<div class="sale-info">
							<div class="date-label">{branch.branch_name}</div>
							<div class="amount-label">
								<img src="/icons/saudi-currency.png" alt="SAR" class="currency-icon" />
								{formatCurrency(branch.total_amount)}
							</div>
						</div>
					</div>
				{/each}
			</div>
		{/if}
	</div>

	<!-- Yesterday's Sales Collection Card -->
	<div class="sales-card">
		<div class="header">
			<h3>{$t('reports.yesterdayCollectionSales') || 'Yesterday Sales (Collection)'}</h3>
			<button class="refresh-btn" on:click={loadYesterdayCollectionData} title="Refresh">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
				</svg>
			</button>
		</div>
		{#if loadingYesterdayCollection}
			<div class="loading">{$t('common.loading')}</div>
		{:else}
			<div class="chart-container">
				{#each yesterdayCollectionData as branch}
					<div class="sale-item">
						<div class="bar-container">
							<div class="bar" style="height: {getCollectionBarHeight(branch.total_amount, maxYesterdayCollectionAmount)}px; background-color: {getCollectionBarColor(branch.total_amount, yesterdayCollectionData)};"></div>
						</div>
						<div class="sale-info">
							<div class="date-label">{branch.branch_name}</div>
							<div class="amount-label">
								<img src="/icons/saudi-currency.png" alt="SAR" class="currency-icon" />
								{formatCurrency(branch.total_amount)}
							</div>
						</div>
					</div>
				{/each}
			</div>
		{/if}
	</div>
