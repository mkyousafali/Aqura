import"../chunks/CWj6FrbW.js";import"../chunks/DsZmANqb.js";import{p as Re,o as Ue,i as $e,f as _,h as Ve,a as B,b as q,t as L,c as p,j as Fe,$ as je,k as Ge,l as e,s as R,m as i,n as g,q as P,r as l,u as a,v as c,x as G,y as re,z as he,A as ge,B as Ke,C as We,D as U,E as He,F as _e,G as ze}from"../chunks/CE8Bg3hM.js";import{g as oe}from"../chunks/CfR4tY9u.js";import"../chunks/Dqyum4BN.js";import{a as be,p as ye}from"../chunks/COcYFW_x.js";var Ne=_('<meta name="description" content="Access your Aqura Management System"/> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/> <meta name="theme-color" content="#15A34A"/>',1),Je=_('<span class="field-error svelte-1x05zx6">Username must be at least 3 characters</span>'),Oe=_('<span class="field-error svelte-1x05zx6">Password must be at least 6 characters</span>'),Xe=_('<span class="loading-spinner svelte-1x05zx6"></span> Signing In...',1),Ye=ze('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10,17 15,12 10,7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg> Sign In to System',1),Ze=_('<form class="auth-form svelte-1x05zx6"><div class="form-header svelte-1x05zx6"><h2 class="svelte-1x05zx6">Welcome Back</h2> <p class="svelte-1x05zx6">Enter your credentials to access the system</p></div> <div class="form-fields svelte-1x05zx6"><div class="field-group svelte-1x05zx6"><label for="username" class="svelte-1x05zx6">Username</label> <input id="username" type="text" placeholder="Enter your username" autocomplete="username"/> <!></div> <div class="field-group svelte-1x05zx6"><label for="password" class="svelte-1x05zx6">Password</label> <input id="password" type="password" placeholder="Enter your password" autocomplete="current-password"/> <!></div> <div class="form-options svelte-1x05zx6"><label class="checkbox-option svelte-1x05zx6"><input type="checkbox" class="svelte-1x05zx6"/> <span class="checkbox-mark"></span> Remember me for 30 days</label></div></div> <button type="submit" class="auth-submit-btn svelte-1x05zx6"><!></button></form>'),es=_('<input type="text" placeholder="" maxlength="1" autocomplete="off" inputmode="numeric" pattern="[0-9]*"/>'),ss=_('<span class="field-error svelte-1x05zx6">Enter a valid 6-digit security code</span>'),ts=_('<span class="loading-spinner svelte-1x05zx6"></span> Accessing...',1),as=ze('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"></path><path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"></path><path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"></path><path d="M12 3c0 1-1 3-3 3s-3-2-3-3 1-3 3-3 3 2 3 3"></path><path d="M12 21c0-1 1-3 3-3s3 2 3 3-1 3-3 3-3-2-3-3"></path></svg> Access System',1),is=_('<form class="auth-form svelte-1x05zx6"><div class="form-header svelte-1x05zx6"><h2 class="svelte-1x05zx6">Quick Access</h2> <p class="svelte-1x05zx6">Enter your 6-digit security code</p></div> <div class="form-fields svelte-1x05zx6"><div class="field-group svelte-1x05zx6"><label for="quickAccess" class="svelte-1x05zx6">Security Code</label> <div class="quick-access-digits svelte-1x05zx6"></div> <!></div> <div class="field-spacer svelte-1x05zx6"></div> <div class="form-options svelte-1x05zx6"><label class="checkbox-option svelte-1x05zx6"><input type="checkbox" class="svelte-1x05zx6"/> <span class="checkbox-mark"></span> Remember this device</label></div></div> <button type="submit" class="auth-submit-btn svelte-1x05zx6"><!></button></form>'),ls=_('<div class="status-message error-status svelte-1x05zx6" role="alert"><div class="status-icon svelte-1x05zx6"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div> <div class="status-content svelte-1x05zx6"><h4 class="svelte-1x05zx6">Authentication Failed</h4> <p class="svelte-1x05zx6"> </p></div></div>'),rs=_('<div class="status-message success-status svelte-1x05zx6" role="status"><div class="status-icon svelte-1x05zx6"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"></path><circle cx="12" cy="12" r="10"></circle></svg></div> <div class="status-content svelte-1x05zx6"><h4 class="svelte-1x05zx6">Access Granted</h4> <p class="svelte-1x05zx6"> </p></div></div>'),os=_('<div class="login-content svelte-1x05zx6"><div class="login-main-card svelte-1x05zx6"><div class="logo-section svelte-1x05zx6"><div class="logo svelte-1x05zx6"><img src="/icons/logo.png" alt="Aqura Logo" class="logo-image svelte-1x05zx6"/></div> <h1 class="app-title svelte-1x05zx6">Aqura</h1> <p class="app-subtitle svelte-1x05zx6">Management System Access</p></div> <div class="auth-section svelte-1x05zx6"><div class="method-selector svelte-1x05zx6"><button><div class="method-icon svelte-1x05zx6"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div> <div class="method-info svelte-1x05zx6"><h3 class="svelte-1x05zx6">Username & Password</h3> <p class="svelte-1x05zx6">Traditional login method</p></div></button> <button><div class="method-icon svelte-1x05zx6"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><circle cx="12" cy="16" r="1"></circle><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></div> <div class="method-info svelte-1x05zx6"><h3 class="svelte-1x05zx6">Quick Access Code</h3> <p class="svelte-1x05zx6">6-digit secure access</p></div></button></div> <div class="auth-forms svelte-1x05zx6"><!></div></div> <!> <!></div></div>'),cs=_("<div><!></div>");function ms(ke,we){Re(we,!1);let S=g("username"),u=g(!1),k=g(""),K=g(""),$=g(""),V=g(""),W=g(!1),H="",r=g(["","","","","",""]),N=g(!0),J=g(!0),O=g(!0),ce=g(!1),ne=g(!1);Ue(async()=>{i(ce,!0),setTimeout(()=>{i(ne,!0)},300),await be.init(),Ae()});function Ae(){const s=be.subscribe(t=>{t&&t.user&&oe("/")});setTimeout(s,100)}function ve(){return i(N,e($).length>=3),e(N)}function de(){return i(J,e(V).length>=6),e(J)}function X(){H=e(r).join("");const s=/^[0-9]+$/.test(H);return i(O,H.length===6&&s),e(O)}async function ue(){if(!ve()||!de()){i(k,"Please check your credentials and try again.");return}i(u,!0),i(k,"");try{const s=await ye.login(e($),e(V));s.success?(i(K,"Login successful! Redirecting..."),setTimeout(()=>{oe("/")},1500)):i(k,s.error||"Login failed. Please try again.")}catch(s){i(k,s.message||"Login failed. Please try again.")}finally{i(u,!1)}}async function xe(){if(!X()){i(k,"Please enter a valid 6-digit access code.");return}i(u,!0),i(k,"");try{const s=await ye.loginWithQuickAccess(H);s.success?(i(K,"Quick access successful! Redirecting..."),setTimeout(()=>{oe("/")},1500)):i(k,s.error||"Quick access login failed. Please try again.")}catch(s){i(k,s instanceof Error?s.message:"Login failed. Please try again.")}finally{i(u,!1)}}function Me(s){s.key==="Enter"&&!e(u)&&(e(S)==="username"?ue():xe())}function Be(s,t){const w=s.target,v=w.value.replace(/\D/g,"");v.length>0?(U(r,e(r)[t]=v.slice(-1)),w.value=e(r)[t],t<5&&e(r)[t]!==""&&setTimeout(()=>{const D=document.getElementById(`digit-${t+1}`);D&&(D.focus(),D.select())},10)):U(r,e(r)[t]=""),X()}function De(s,t){const w=s.target;if(s.key==="Backspace"){if(s.preventDefault(),e(r)[t]!=="")U(r,e(r)[t]=""),w.value="";else if(t>0){U(r,e(r)[t-1]="");const v=document.getElementById(`digit-${t-1}`);v&&(v.value="",v.focus())}X();return}if(s.key==="ArrowLeft"&&t>0){s.preventDefault();const v=document.getElementById(`digit-${t-1}`);v&&(v.focus(),v.select())}else if(s.key==="ArrowRight"&&t<5){s.preventDefault();const v=document.getElementById(`digit-${t+1}`);v&&(v.focus(),v.select())}!/[0-9]/.test(s.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(s.key)&&s.preventDefault()}function Ie(s){var F;s.preventDefault();const w=(((F=s.clipboardData)==null?void 0:F.getData("text"))||"").replace(/\D/g,"").slice(0,6);for(let A=0;A<6;A++){U(r,e(r)[A]=w[A]||"");const j=document.getElementById(`digit-${A}`);j&&(j.value=e(r)[A])}const v=w.length-1,D=Math.min(Math.max(v+1,0),5),C=document.getElementById(`digit-${D}`);C&&C.focus(),X()}$e();var Y=cs();Ve(s=>{var t=Ne();je.title="Login - Aqura Management System",P(4),p(s,t)}),B("keydown",Ge,Me);let pe;var Ee=l(Y);{var qe=s=>{var t=os(),w=l(t),v=c(l(w),2),D=l(v),C=l(D);let F;var A=c(C,2);let j;a(D);var me=c(D,2),Ce=l(me);{var Le=x=>{var d=Ze(),f=c(l(d),2),h=l(f),m=c(l(h),2);G(m);let Z;var ae=c(m,2);{var ee=o=>{var E=Je();p(o,E)};q(ae,o=>{e(N)||o(ee)})}a(h);var T=c(h,2),M=c(l(T),2);G(M);let Q;var ie=c(M,2);{var le=o=>{var E=Oe();p(o,E)};q(ie,o=>{e(J)||o(le)})}a(T);var se=c(T,2),n=l(se),b=l(n);G(b),P(3),a(n),a(se),a(f);var I=c(f,2),y=l(I);{var te=o=>{var E=Xe();P(),p(o,E)},z=o=>{var E=Ye();P(),p(o,E)};q(y,o=>{e(u)?o(te):o(z,!1)})}a(I),a(d),L((o,E)=>{Z=R(m,1,"field-input svelte-1x05zx6",null,Z,o),m.disabled=e(u),Q=R(M,1,"field-input svelte-1x05zx6",null,Q,E),M.disabled=e(u),b.disabled=e(u),I.disabled=e(u)||!e($)||!e(V)},[()=>({error:!e(N)}),()=>({error:!e(J)})]),re(m,()=>e($),o=>i($,o)),B("input",m,ve),re(M,()=>e(V),o=>i(V,o)),B("input",M,de),he(b,()=>e(W),o=>i(W,o)),B("submit",d,ge(ue)),p(x,d)},Pe=x=>{var d=is(),f=c(l(d),2),h=l(f),m=c(l(h),2);Ke(m,5,()=>e(r),He,(n,b,I)=>{var y=es();G(y),We(y,"id",`digit-${I}`);let te;L(z=>{te=R(y,1,"digit-input svelte-1x05zx6",null,te,z),y.disabled=e(u)},[()=>({error:!e(O)&&e(r).some(z=>z!=="")})]),re(y,()=>e(r)[I],z=>U(r,e(r)[I]=z)),B("input",y,z=>Be(z,I)),B("keydown",y,z=>De(z,I)),B("paste",y,Ie),p(n,y)}),a(m);var Z=c(m,2);{var ae=n=>{var b=ss();p(n,b)};q(Z,n=>{!e(O)&&e(r).some(b=>b!=="")&&n(ae)})}a(h);var ee=c(h,4),T=l(ee),M=l(T);G(M),P(3),a(T),a(ee),a(f);var Q=c(f,2),ie=l(Q);{var le=n=>{var b=ts();P(),p(n,b)},se=n=>{var b=as();P(),p(n,b)};q(ie,n=>{e(u)?n(le):n(se,!1)})}a(Q),a(d),L(n=>{M.disabled=e(u),Q.disabled=n},[()=>e(u)||e(r).some(n=>n==="")]),he(M,()=>e(W),n=>i(W,n)),B("submit",d,ge(xe)),p(x,d)};q(Ce,x=>{e(S)==="username"?x(Le):x(Pe,!1)})}a(me),a(v);var fe=c(v,2);{var Se=x=>{var d=ls(),f=c(l(d),2),h=c(l(f),2),m=l(h,!0);a(h),a(f),a(d),L(()=>_e(m,e(k))),p(x,d)};q(fe,x=>{e(k)&&x(Se)})}var Te=c(fe,2);{var Qe=x=>{var d=rs(),f=c(l(d),2),h=c(l(f),2),m=l(h,!0);a(h),a(f),a(d),L(()=>_e(m,e(K))),p(x,d)};q(Te,x=>{e(K)&&x(Qe)})}a(w),a(t),L((x,d)=>{F=R(C,1,"method-btn svelte-1x05zx6",null,F,x),C.disabled=e(u),j=R(A,1,"method-btn svelte-1x05zx6",null,j,d),A.disabled=e(u)},[()=>({active:e(S)==="username"}),()=>({active:e(S)==="quickAccess"})]),B("click",C,()=>i(S,"username")),B("click",A,()=>i(S,"quickAccess")),p(s,t)};q(Ee,s=>{e(ne)&&s(qe)})}a(Y),L(s=>pe=R(Y,1,"login-page svelte-1x05zx6",null,pe,s),[()=>({mounted:e(ce)})]),p(ke,Y),Fe()}export{ms as component};
//# sourceMappingURL=3.BFRIkIiI.js.map
