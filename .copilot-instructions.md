# GitHub Copilot Instructions for Aqura Management System

## ðŸ”„ Version Management Protocol

**CRITICAL: Every time you commit and push changes to git, you MUST update the version number.**

### Automatic Version Update Process:

1. **Before committing any changes**, run the version update script:
   ```bash
   node scripts/update-version.js
   ```
   This will automatically:
   - Increment patch version (1.0.0 â†’ 1.0.1)
   - Update root `package.json`
   - Update `frontend/package.json`
   - Update version display in `frontend/src/lib/components/Sidebar.svelte`

2. **For different version types**:
   ```bash
   node scripts/update-version.js patch  # 1.0.0 â†’ 1.0.1 (bug fixes)
   node scripts/update-version.js minor  # 1.0.0 â†’ 1.1.0 (new features)
   node scripts/update-version.js major  # 1.0.0 â†’ 2.0.0 (breaking changes)
   ```

3. **Then proceed with git operations**:
   ```bash
   git add -A
   git commit -m "feat: your feature description"
   git push origin master
   ```

### Version Update Guidelines:

- **Patch (x.x.X)**: Bug fixes, small improvements, styling changes
- **Minor (x.X.0)**: New features, component additions, significant enhancements
- **Major (X.0.0)**: Breaking changes, major architecture changes, API changes

### Files That Display Version:

- `frontend/src/lib/components/Sidebar.svelte` - Shows version in bottom footer as "v1.0.0"
- `package.json` - Root project version
- `frontend/package.json` - Frontend project version

### Integration Points:

The version number appears in:
1. **Sidebar Footer**: Displays current version to users
2. **Package Metadata**: Used for builds and deployments
3. **Git Tags**: Should match version for releases

### Copilot Workflow Checklist:

Before every `git push`:
- [ ] Run `node scripts/update-version.js [type]`
- [ ] Verify version updated in all 3 locations
- [ ] Commit version changes with descriptive message
- [ ] Push to remote repository

### Error Handling:

If version update script fails:
1. Check if all target files exist
2. Verify file permissions
3. Ensure valid JSON syntax in package.json files
4. Check for merge conflicts in target files

### Manual Version Update (Fallback):

If script fails, manually update these files:
1. `/package.json` - "version" field
2. `/frontend/package.json` - "version" field  
3. `/frontend/src/lib/components/Sidebar.svelte` - `<span class="version-text">vX.X.X</span>`

---

## ðŸŽ¯ Project Context

### Architecture:
- **Frontend**: SvelteKit + TypeScript + TailwindCSS
- **Backend**: Supabase (PostgreSQL + Auth + Storage)
- **Deployment**: Vercel (Frontend) + Supabase (Backend)
- **Build**: Vite + PWA + Electron (for desktop)

### Key Components:
- Window Management System (`windowManager`)
- Sidebar Navigation with Submenus
- Multi-step Receiving Process
- Dynamic Certificate Generation
- Vendor Management with Pagination
- User Role-based Access Control

### Code Style:
- Use TypeScript for type safety
- Follow reactive patterns with Svelte stores
- Implement proper error handling
- Add loading states and user feedback
- Use semantic HTML and accessibility features
- Keep functions focused and modular

### Database Schema:
- `users` - User accounts and profiles
- `vendors` - Vendor information and relationships
- `branches` - Branch/location management
- `receiving_records` - Receiving transaction data
- `notifications` - System notifications
- Various junction tables for relationships

Remember: Always maintain backward compatibility and provide migration paths for breaking changes!